import { ethers } from 'ethers';
import { swapExactSyForYtAbi } from './abi';

// Decode input data for swapExactSyForYt
function decodeSwapExactSyForYtInput(inputData: string) {
  const swapExactSyForYtInterface = new ethers.utils.Interface(swapExactSyForYtAbi);
  const decodedData = swapExactSyForYtInterface.decodeFunctionData('swapExactSyForYt', inputData);

  return {
    receiver: decodedData[0],
    market: decodedData[1],
    exactSyIn: decodedData[2],
    minYtOut: decodedData[3],
    guessYtOut: {
      guessMin: decodedData[4].guessMin,
      guessMax: decodedData[4].guessMax,
      guessOffchain: decodedData[4].guessOffchain,
      maxIteration: decodedData[4].maxIteration,
      eps: decodedData[4].eps,
    },
    limit: {
      limitRouter: decodedData[5].limitRouter,
      epsSkipMarket: decodedData[5].epsSkipMarket,
      normalFills: decodedData[5].normalFills,
      flashFills: decodedData[5].flashFills,
      optData: decodedData[5].optData,
    },
  };
}

// Example usage
const inputData = '0x7b8b4b950000000000000000000000003e000d33564dab9793cd8cde6a5957f5e5abafd1000000000000000000000000e11f9786b06438456b044b3e21712228adcaa0d10000000000000000000000000000000000000000000000000011c37937e0800000000000000000000000000000000000000004593d9206f51315f81b400000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000005af3107a400000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000';

const decodedData = decodeSwapExactSyForYtInput(inputData);
console.log(decodedData);