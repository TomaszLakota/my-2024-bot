import { ethers } from "ethers";
import { swapExactSyForYtAbi } from "./abi";

// Decode input data for swapExactSyForYt
function decodeSwapExactSyForYtInput(inputData: string) {
    const swapExactSyForYtInterface = new ethers.utils.Interface(swapExactSyForYtAbi);
    const decodedData = swapExactSyForYtInterface.decodeFunctionData("swapExactSyForYt", inputData);

    return {
        receiver: decodedData[0],
        market: decodedData[1],
        exactSyIn: decodedData[2],
        minYtOut: decodedData[3],
        guessYtOut: {
            guessMin: decodedData[4].guessMin,
            guessMax: decodedData[4].guessMax,
            guessOffchain: decodedData[4].guessOffchain,
            maxIteration: decodedData[4].maxIteration,
            eps: decodedData[4].eps,
        },
        limit: {
            limitRouter: decodedData[5].limitRouter,
            epsSkipMarket: decodedData[5].epsSkipMarket,
            normalFills: decodedData[5].normalFills,
            flashFills: decodedData[5].flashFills,
            optData: decodedData[5].optData,
        },
    };
}

// Example usage
const inputData =
    "0x7b8b4b950000000000000000000000003e000d33564dab9793cd8cde6a5957f5e5abafd10000000000000000000000006f02c88650837c8dfe89f66723c4743e9cf833cd0000000000000000000000000000000000000000000000000044913f6c2a3ffe00000000000000000000000000000000000000000000000011807de7aaacf6e200000000000000000000000000000000000000000000000008edf718280f1ab200000000000000000000000000000000000000000000000013a51f9b8b546dee00000000000000000000000000000000000000000000000011807de7aaacf6e20000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000009184e72a00000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";

const decodedData = decodeSwapExactSyForYtInput(inputData);
console.log(decodedData);
